- # DailyLineup#show

= debug @user_feedback

- cache ['navbar', @lineup] do
  - previous_rec = @previous.first
  - if previous_rec
    %a{:href => lineups_path(previous_rec)}previous
    |
  -else
    back
    \|

  - next_rec = @next.first
  - if next_rec
    %a{:href => lineups_path(next_rec)}next
    |
  -else
    next
    \|

%a{:href => root_path}home

%table
  %tr
    %td{:colspan => 2}
      %b Date:
      =@lineup.date
  - # Don't eager load anything here (e.g. review/rating), rely on fragment caching instead!
  - @lineup.schedulings.each do |scheduling|
    %tr
      %td
        %b= "%s %d:" % [(scheduling.shift == 1 ? "Early" : "Late"), scheduling.position]
    = render :partial => "lineup_item",
             :locals => { :restaurant => scheduling.restaurant }
    %tr
      %td{:colspan => 2}
        = render :partial => 'shared/user_feedback', :locals => {:target => scheduling.restaurant}
