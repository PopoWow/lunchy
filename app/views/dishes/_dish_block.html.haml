- # Not worrying about the tremendous activity generated by these partials.
- # In production, they will be frag cached so will only evaluate when
- # reviews/ratings are added for dish.

- cache ['index', dish] do
  #dish_block{:id => dish.id}
    %h5
      %a{:href => dish_path(dish)}= "#{dish.name} pos: #{dish.position}"
      %span= dish.price
    = render :partial => "desc_row", :locals => { :item => dish }

    - # Display review/rating info for this dish.
    #dish-feedback{:id => dish.id}
      %span#dish-reviews{:id => dish.id}
        = pluralize(dish.reviews.length, 'Review')
      \|
      %span#dish-rating{:id => dish.id}
        = "Rating: #{dish.star_rating} (#{dish.valid_rating_count} ratings)"
